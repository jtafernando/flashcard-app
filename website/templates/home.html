{% extends "base.html" %}

{% block title %}Home - TangoCards{% endblock %}

{% block content %}
<br />
<h1 align="left">Decks</h1>
<ul class="list-group list-group-flush" id="decks">
    {% for deck in user.decks %}
    <li class="list-group-item">
        <button class="btn btn-link pl-0" value={{deck.id}} onclick="studySession(this.value)">{{deck.deck_name}}</button>
        <button type="button" class="btn btn-danger btn-sm" style="float: right; margin: 5px;" data-toggle="modal" data-target="#deleteDeckModal"
            data-deck-name="{{deck.deck_name}}">
            <span aria-hidden="true">&times;</span>
        </button>
        <button type="button" class="btn btn-secondary btn-sm" style="float: right; margin: 5px;" data-toggle="modal"
            data-target="#deckSettingsModal" data-new-per-day={{deck.new_per_day}} data-rev-per-day={{deck.rev_per_day}}
            data-deck-name="{{deck.deck_name}}" data-order="{{deck.rand_order}}">
            Deck Settings
        </button>
    </li>
    {% endfor %}
</ul>
<br />
<button type="button" class="btn btn-primary" style="float: left;" data-toggle="modal" data-target="#createDeckModal">
    Create New Deck
</button>

<!--Deck settings modal-->
<div class="modal fade" id="deckSettingsModal" tabindex="-1" role="dialog" aria-labelledby="deckSettingsModal"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="settingsModalTitle"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="POST" id="deckSettingsForm">
                    <input required type="hidden" class="form-control" id="deck" name="deck">
                    <div class="form-group" style="margin-right: 50%;">
                        <label for="newCardsPerDay">Max new cards per day:</label>
                        <input required type="number" class="form-control" min="1" id="newCardsPerDay"
                            name="newCardsPerDay">
                    </div>
                    <div class="form-group" style="margin-right: 50%;">
                        <label for="reviewCardsPerDay">Max review cards per day:</label>
                        <input required type="number" class="form-control" min="1" id="reviewCardsPerDay"
                            name="reviewCardsPerDay">
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="newCardOrder" id="inOrder" value="option1"
                            checked>
                        <label class="form-check-label" for="inOrderBubble">
                            Display new cards in the order they were added.
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="newCardOrder" id="randomOrder"
                            value="option2">
                        <label class="form-check-label" for="randomOrder">
                            Display new cards in random order.
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" form="deckSettingsForm">Save</button>
            </div>
        </div>
    </div>
</div>

<!--Create new deck modal-->
<div class="modal fade" id="createDeckModal" tabindex="-1" role="dialog" aria-labelledby="createDeckModal"
    aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="createDeckModal">Create new deck</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="POST" id="newDeckForm">
                    <div class="form-group">
                        <label for="deckName">Deck Name</label>
                        <input type="text" class="form-control" id="deckName" name="deckName"
                            placeholder="Enter new deck name" required />
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" form="newDeckForm">Create Deck</button>
            </div>
        </div>
    </div>
</div>

<!--Delete deck modal-->
<div class="modal fade" id="deleteDeckModal" tabindex="-1" role="dialog" aria-labelledby="deleteDeckModal"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteDeckModal">Delete</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form method="POST" id="deleteDeckForm">
                    <input required type="hidden" class="form-control" id="deckToDelete" name="deckToDelete">
                    <p>Delete all cards in deck? This cannot be undone.</p>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <button type="submit" class="btn btn-primary" form="deleteDeckForm">OK</button>
            </div>
        </div>
    </div>
</div>

{% endblock %}